<!DOCTYPE html>
<html>
<head>
<title>WordsJS</title>
<link href='src/style.css' rel='stylesheet'>
<script src='lib/jquery-1.11.0.min.js'></script>
<script src='src/wordtree.js'></script>
<script src='src/lang/english.js'></script>
<script>

  var words = new PrefixTree();
  words.addList(wordList);

  $(document).ready(function(){

    var newlining = function(str, lineLength){
      var newlineCount = 0;
      for (var i = 1; i < str.length / lineLength; i++){
        var pos = 0;
        while(str[i * lineLength + newlineCount - pos] !== ','){
          pos++;
        }
        str = str.slice(0, i * lineLength + newlineCount - pos + 2) + '\n' + str.slice(
          i * lineLength + newlineCount - pos + 2);
        newlineCount++;
      }
      return str;
    };

    $('button.scrabble').on('click', function(){
      var word = $('input.scrabble').val();
      console.log(word);
      // var result = newlining(scrabbleSolution(word, words).join(', '), 45);
      var res = scrabbleSolution(word, words).join(', ');
      console.log(res);
      var result = newlining(res, 45);

      //test case for newlining function.
      //var result = 'hfkw, sdfks, saef wae, wefwrwerf w, adssfskfkfs, dsfwerwaw fsfaefewkfwfewf, wewreeoo';
      $('textarea.scrabble').val(result);
      console.log(result);
      $('input.scrabble').val('');
    });
    $('button.autofill').on('click', function(){
      var word = $('input.autofill').val();
      var result = newlining(words.allWordsBelow(word).join(', '), 45);
      var warning = '<!--Still in contruction--!>'
      $('textarea.autofill').val(warning);
      $('input.scrabble').val('');
    });

    $('input.scrabble').on('keypress', function(event){
      if(event.keyCode === 13){
        $('button.scrabble').trigger('click');
      }
    });
    $('input.autofill').on('keypress', function(event){
      if(event.keyCode === 13){
        $('button.autofill').trigger('click');
      }
    });
  });
</script>
</head>

<body>
  <header>
    <h1>WordsJS</h1>
    <div class='signature'>@marc0au</div>
  </header>
  <main class='functions'>

    <section class='scrabble'>
      <div class='title'>
        <h2>Cheat in Scrabble!</h2>
      </div>
      <div class='functionalities'>
        <input class='scrabble' type='text'></input>
        <button class='scrabble'>Enter</button>
        <br>
      </div>
        <textarea class='scrabble'></textarea>
    </section>
    
    <section class='autofill'>
      <div class='title'>
        <h2>Autofill</h2>
      </div>
      <div class='functionalities'>
        <input class='autofill' type='text'></input>
        <button class='autofill'>Enter</button>
        <br>
      </div>
        <textarea class='autofill'></textarea>
    </section>

  </main>


</body>

</html>
